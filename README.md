# compilers-sp25
Final project for CS 380C: Advanced Topics in Compilers

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

```bash
python3 -u EGNO/compiled_mocap.py --config_by_file config_mocap_no.json --outf out/egno-mocap/compiled
```

## Running Workloads

### With idev:
```bash
TORCH_LOGS="" python3 -u ${WORK}/EGNO/compiled_mocap.py --config_by_file ${WORK}/compilers-sp25/config_mocap_no.json --outf ${WORK}/slurm-out/egno-mocap-out/compiled 2>&1 | tee ${WORK}/slurm-out/egno-mocap-out/compiled/idev/"torch_logs_$(date +'%Y-%m-%d_%H-%M-%S').txt"
```

List of torch logs options:
```
  all
  aot
  autograd
  c10d
  cache
  ddp
  distributed
  dtensor
  dynamic
  dynamo
  export
  fake_tensor
  fsdp
  inductor
  onnx
  pp
  torch
  aot_graphs                            Prints the FX forward and backward graph generated by AOTDispatch, after partitioning. Useful to understand what's being given to Inductor
  aot_graphs_effects                    Prints the FX forward and backward graph generated by AOTDispatch, useful for debugging effects processing.
  compiled_autograd                     Prints various logs in compiled_autograd, including but not limited to the graphs. Useful for debugging compiled_autograd.
  graph_breaks                          Prints whenever Dynamo decides that it needs to graph break (i.e. create a new graph). Useful for debugging why torch.compile has poor performance
  guards                                This prints the guards for every compiled Dynamo frame. It does not tell you where the guards come from.
  kernel_code                           Prints the code that Inductor generates (on a per-kernel basis)
  output_code                           Prints the code that Inductor generates (either Triton or C++)
  recompiles                            Prints the reason why we recompiled a graph. Very, very useful.
  recompiles_verbose                    Prints all guard checks that fail during a recompilation. At runtime, Dynamo will stop at the first failed check for each failing guard. So not all logged failing checks are actually ran by Dynamo.
```